<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vehicle Customer Clinic Feedback</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-slate-100 text-slate-800">
    <div class="mx-auto w-full max-w-4xl px-4 py-8 sm:px-6 lg:py-12">
      <header class="mb-8 rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-200">
        <h1 class="text-2xl font-bold tracking-tight sm:text-3xl">Vehicle Customer Clinic Feedback</h1>
        <p class="mt-3 text-sm text-slate-600 sm:text-base">
          Welcome, and thank you for participating. Please share your feedback on the vehicle experience,
          features, and related services.
        </p>
      </header>

      <form id="surveyForm" class="space-y-6" novalidate>
        <section class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-200">
          <h2 class="text-lg font-semibold">Participant Information</h2>
          <div class="mt-4 grid gap-4 sm:grid-cols-2">
            <div>
              <label for="fullName" class="mb-1 block text-sm font-medium">Full Name <span class="text-red-600">*</span></label>
              <input
                id="fullName"
                name="fullName"
                type="text"
                required
                class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm shadow-sm outline-none transition focus:border-blue-500 focus:ring-2 focus:ring-blue-200"
                placeholder="Your full name"
              />
            </div>
            <div>
              <label for="email" class="mb-1 block text-sm font-medium">Email Address <span class="text-red-600">*</span></label>
              <input
                id="email"
                name="email"
                type="email"
                required
                class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm shadow-sm outline-none transition focus:border-blue-500 focus:ring-2 focus:ring-blue-200"
                placeholder="name@example.com"
              />
            </div>
          </div>
          <p id="validationMessage" class="mt-3 hidden text-sm text-red-600"></p>
        </section>

        <section class="space-y-4 rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-200">
          <h2 class="text-lg font-semibold">Survey Questions</h2>

          <div class="rounded-xl border border-slate-200 p-4">
            <p class="mb-2 text-sm font-medium">Q1: Overall satisfaction with the vehicle's exterior design.</p>
            <label for="q1" class="sr-only">Q1 Rating 1-5</label>
            <select id="q1" name="q1" class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
              <option value="">Select rating (1-5)</option>
              <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
            </select>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <p class="mb-2 text-sm font-medium">Q2: Comfort and ergonomics of the interior seating.</p>
            <div class="flex flex-wrap gap-3" role="radiogroup" aria-label="Q2 Rating 1-5">
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q2" value="1" />1</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q2" value="2" />2</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q2" value="3" />3</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q2" value="4" />4</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q2" value="5" />5</label>
            </div>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <p class="mb-2 text-sm font-medium">Q3: Ease of use and responsiveness of the infotainment system.</p>
            <label for="q3" class="sr-only">Q3 Rating 1-5</label>
            <select id="q3" name="q3" class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
              <option value="">Select rating (1-5)</option>
              <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
            </select>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <label for="q4" class="mb-2 block text-sm font-medium">
              Q4: Which vehicle feature is most important to your purchasing decision?
            </label>
            <select id="q4" name="q4" class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
              <option value="">Select an option</option>
              <option>Performance</option>
              <option>Safety</option>
              <option>Technology</option>
              <option>Comfort</option>
              <option>Fuel Efficiency/EV Range</option>
            </select>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <p class="mb-2 text-sm font-medium">Q5: Satisfaction with the vehicle's acceleration and handling.</p>
            <div class="flex flex-wrap gap-3" role="radiogroup" aria-label="Q5 Rating 1-5">
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q5" value="1" />1</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q5" value="2" />2</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q5" value="3" />3</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q5" value="4" />4</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q5" value="5" />5</label>
            </div>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <p class="mb-2 text-sm font-medium">Q6: Clarity and usefulness of the digital instrument cluster/displays.</p>
            <label for="q6" class="sr-only">Q6 Rating 1-5</label>
            <select id="q6" name="q6" class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
              <option value="">Select rating (1-5)</option>
              <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
            </select>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <p class="mb-2 text-sm font-medium">Q7: How would you rate the cargo space and storage options?</p>
            <div class="flex flex-wrap gap-3" role="radiogroup" aria-label="Q7 Rating 1-5">
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q7" value="1" />1</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q7" value="2" />2</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q7" value="3" />3</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q7" value="4" />4</label>
              <label class="inline-flex items-center gap-1 text-sm"><input type="radio" name="q7" value="5" />5</label>
            </div>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <p class="mb-2 text-sm font-medium">
              Q8: Based on your experience today, how likely are you to recommend this vehicle to a friend or colleague?
            </p>
            <label for="q8" class="sr-only">Q8 Rating 1-10</label>
            <select id="q8" name="q8" class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm">
              <option value="">Select rating (1-10)</option>
              <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
              <option>6</option><option>7</option><option>8</option><option>9</option><option>10</option>
            </select>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <label for="q9" class="mb-2 block text-sm font-medium">
              Q9: Please provide your thoughts on the dealership and customer service experience.
            </label>
            <textarea
              id="q9"
              name="q9"
              rows="4"
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm"
              placeholder="Share your feedback"
            ></textarea>
          </div>

          <div class="rounded-xl border border-slate-200 p-4">
            <label for="q10" class="mb-2 block text-sm font-medium">
              Q10: Do you have any additional comments or suggestions for improvement?
            </label>
            <textarea
              id="q10"
              name="q10"
              rows="4"
              class="w-full rounded-lg border border-slate-300 px-3 py-2 text-sm"
              placeholder="Additional comments"
            ></textarea>
          </div>
        </section>

        <section class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-slate-200">
          <h2 class="text-lg font-semibold">Actions</h2>
          <p class="mt-2 text-sm text-slate-600">Required fields: Full Name and Email Address.</p>
          <div class="mt-4 flex flex-col gap-3 sm:flex-row">
            <button
              type="button"
              id="exportJsonBtn"
              class="inline-flex items-center justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300"
            >
              Export as JSON
            </button>
            <button
              type="button"
              id="emailBtn"
              class="inline-flex items-center justify-center rounded-lg bg-slate-700 px-4 py-2 text-sm font-medium text-white transition hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-slate-300"
            >
              Submit via Email
            </button>
          </div>
          <p id="statusMessage" class="mt-3 text-sm text-emerald-700"></p>
        </section>
      </form>
    </div>

    <script>
      const form = document.getElementById('surveyForm');
      const exportJsonBtn = document.getElementById('exportJsonBtn');
      const emailBtn = document.getElementById('emailBtn');
      const validationMessage = document.getElementById('validationMessage');
      const statusMessage = document.getElementById('statusMessage');

      function getRadioValue(name) {
        const selected = form.querySelector(`input[name="${name}"]:checked`);
        return selected ? selected.value : '';
      }

      function collectFormData() {
        return {
          participant: {
            fullName: form.fullName.value.trim(),
            email: form.email.value.trim()
          },
          responses: {
            q1_exteriorDesignSatisfaction: form.q1.value,
            q2_interiorComfortErgonomics: getRadioValue('q2'),
            q3_infotainmentEaseResponsiveness: form.q3.value,
            q4_mostImportantFeature: form.q4.value,
            q5_accelerationHandlingSatisfaction: getRadioValue('q5'),
            q6_displayClarityUsefulness: form.q6.value,
            q7_cargoStorageRating: getRadioValue('q7'),
            q8_recommendationLikelihood: form.q8.value,
            q9_dealershipServiceFeedback: form.q9.value.trim(),
            q10_additionalComments: form.q10.value.trim()
          },
          submittedAt: new Date().toISOString()
        };
      }

      function validateRequiredFields() {
        validationMessage.classList.add('hidden');
        statusMessage.textContent = '';

        if (!form.checkValidity()) {
          validationMessage.textContent = 'Please provide a valid Full Name and Email Address before continuing.';
          validationMessage.classList.remove('hidden');
          form.reportValidity();
          return false;
        }

        return true;
      }

      exportJsonBtn.addEventListener('click', () => {
        if (!validateRequiredFields()) return;

        const surveyData = collectFormData();

        // JSON export: Convert form data to a pretty JSON string,
        // create a Blob, attach it to a temporary download link,
        // and trigger a client-side download (no backend required).
        const jsonString = JSON.stringify(surveyData, null, 2);
        const blob = new Blob([jsonString], { type: 'application/json' });
        const blobUrl = URL.createObjectURL(blob);

        const tempLink = document.createElement('a');
        tempLink.href = blobUrl;
        tempLink.download = 'survey_results.json';
        document.body.appendChild(tempLink);
        tempLink.click();
        document.body.removeChild(tempLink);

        URL.revokeObjectURL(blobUrl);
        statusMessage.textContent = 'JSON file downloaded: survey_results.json';
      });

      emailBtn.addEventListener('click', () => {
        if (!validateRequiredFields()) return;

        const data = collectFormData();

        const subject = 'Vehicle Customer Clinic Feedback Submission';
        const bodyLines = [
          'Vehicle Customer Clinic Feedback',
          '--------------------------------',
          `Full Name: ${data.participant.fullName}`,
          `Email: ${data.participant.email}`,
          '',
          `Q1 (Exterior Design Satisfaction 1-5): ${data.responses.q1_exteriorDesignSatisfaction || 'N/A'}`,
          `Q2 (Interior Comfort/Ergonomics 1-5): ${data.responses.q2_interiorComfortErgonomics || 'N/A'}`,
          `Q3 (Infotainment Ease/Responsiveness 1-5): ${data.responses.q3_infotainmentEaseResponsiveness || 'N/A'}`,
          `Q4 (Most Important Feature): ${data.responses.q4_mostImportantFeature || 'N/A'}`,
          `Q5 (Acceleration/Handling Satisfaction 1-5): ${data.responses.q5_accelerationHandlingSatisfaction || 'N/A'}`,
          `Q6 (Display Clarity/Usefulness 1-5): ${data.responses.q6_displayClarityUsefulness || 'N/A'}`,
          `Q7 (Cargo/Storage Rating 1-5): ${data.responses.q7_cargoStorageRating || 'N/A'}`,
          `Q8 (Recommendation Likelihood 1-10): ${data.responses.q8_recommendationLikelihood || 'N/A'}`,
          '',
          'Q9 (Dealership/Service Feedback):',
          data.responses.q9_dealershipServiceFeedback || 'N/A',
          '',
          'Q10 (Additional Comments):',
          data.responses.q10_additionalComments || 'N/A',
          '',
          `Submitted At (UTC): ${data.submittedAt}`
        ];

        // Mailto submission: Build a plain-text body, URL-encode subject/body,
        // then open the user's default email client with fields pre-filled.
        const mailtoUrl = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(bodyLines.join('\n'))}`;
        window.location.href = mailtoUrl;
      });
    </script>
  </body>
</html>
